<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheFlagery - Custom & Stock Flags</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .lang-btn.active {
            background-color: #1d4ed8;
            color: white;
        }
        html {
            scroll-behavior: smooth;
        }
        .whatsapp-container .whatsapp-tooltip {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
        }
        .whatsapp-container:hover .whatsapp-tooltip {
            visibility: visible;
            opacity: 1;
        }
        /* Simple spinner for loading state */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border-left-color: #1d4ed8;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-blue-600">
                <a href="#" data-i18n="navTitle">TheFlagery</a>
            </div>
            <div class="hidden md:flex items-center space-x-8 rtl:space-x-reverse">
                <a href="#products" class="text-gray-600 hover:text-blue-600 transition duration-300" data-i18n="navProducts">Products</a>
                <a href="#contact" class="text-gray-600 hover:text-blue-600 transition duration-300" data-i18n="navContact">Contact</a>
                <a href="#faq" class="text-gray-600 hover:text-blue-600 transition duration-300" data-i18n="navFAQ">FAQ</a>
            </div>
            <div class="flex items-center space-x-2 rtl:space-x-reverse">
                <div class="flex border border-gray-300 rounded-lg p-0.5">
                    <button id="lang-en" class="lang-btn px-3 py-1 text-sm font-medium rounded-md transition-colors duration-300">EN</button>
                    <button id="lang-he" class="lang-btn px-3 py-1 text-sm font-medium rounded-md transition-colors duration-300">HE</button>
                </div>
                <a href="#contact" class="hidden sm:inline-block bg-blue-600 text-white font-semibold px-5 py-2 rounded-lg hover:bg-blue-700 transition duration-300" data-i18n="navCTA">Get a Quote</a>
            </div>
        </nav>
    </header>

    <main>
        <section class="py-20 md:py-32 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold text-gray-900 leading-tight" data-i18n="heroTitle">Your Vision, Your Flag.</h1>
                <p class="mt-4 text-lg md:text-xl text-gray-600 max-w-3xl mx-auto" data-i18n="heroSubtitle">High-quality stock flags and fully customizable designs, delivered to your door. Perfect for events, businesses, or personal display.</p>
                <div class="mt-8 flex justify-center gap-4 flex-wrap">
                    <a href="#contact" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-blue-700 transition duration-300" data-i18n="heroCTA1">Get a Custom Quote</a>
                    <a href="#products" class="bg-gray-200 text-gray-800 font-bold py-3 px-8 rounded-lg text-lg hover:bg-gray-300 transition duration-300" data-i18n="heroCTA2">See Our Work</a>
                </div>
            </div>
        </section>

        <section id="products" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-4" data-i18n="productsTitle">Showcase of Our Work</h2>
                <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto" data-i18n="productsSubtitle">From national flags to custom banners for any occasion, we deliver quality you can see. Have an idea? We can make it.</p>
                <div id="product-grid" class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div id="loading-spinner" class="col-span-full flex justify-center items-center h-40">
                        <div class="spinner"></div>
                    </div>
                </div>
                 <p id="error-message" class="hidden text-center text-red-500 mt-8"></p>
            </div>
        </section>

        <section id="contact" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold" data-i18n="contactTitle">Have a Custom Flag Idea?</h2>
                <p class="mt-3 text-lg text-gray-600 max-w-2xl mx-auto" data-i18n="contactSubtitle">We'd love to hear it. Contact us directly on WhatsApp for a free, no-obligation quote and a digital mockup of your design.</p>
                <div class="mt-8">
                    <a href="https://wa.me/15551234567" target="_blank" class="whatsapp-contact-btn bg-green-500 text-white font-bold py-4 px-10 rounded-lg text-xl hover:bg-green-600 transition duration-300 inline-flex items-center gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-whatsapp" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/></svg>
                        <span data-i18n="contactCTA">Contact Us on WhatsApp</span>
                    </a>
                </div>
            </div>
        </section>

        <section id="faq" class="py-20">
            <div class="container mx-auto px-6 max-w-4xl">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-12" data-i18n="faqTitle">Frequently Asked Questions</h2>
                <div class="space-y-4">
                    </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto px-6 py-12">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4" data-i18n="footerTitle">TheFlagery</h3>
                    <p class="text-gray-400" data-i18n="footerDesc">Your vision, your flag. Quality and service you can trust.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4" data-i18n="footerLinks">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#products" class="text-gray-400 hover:text-white" data-i18n="navProducts">Products</a></li>
                        <li><a href="#contact" class="text-gray-400 hover:text-white" data-i18n="navContact">Contact</a></li>
                        <li><a href="#faq" class="text-gray-400 hover:text-white" data-i18n="navFAQ">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4" data-i18n="footerContact">Contact Info</h3>
                    <p class="text-gray-400">support@theflagery.com</p>
                    <a href="https://wa.me/15551234567" target="_blank" class="whatsapp-footer-link text-gray-400 hover:text-white flex items-center gap-2 mt-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-whatsapp" viewBox="0 0 16 16">
                            <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/>
                        </svg>
                        <span data-i18n="whatsappContact">WhatsApp</span>
                    </a>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-gray-700 text-center text-gray-500">
                <p>&copy; <span id="year"></span> TheFlagery. <span data-i18n="footerRights">All rights reserved.</span></p>
            </div>
        </div>
    </footer>

    <div class="whatsapp-container fixed bottom-5 right-5 rtl:right-auto rtl:left-5 z-40 group">
        <a href="https://wa.me/15551234567" target="_blank" class="whatsapp-floating-btn bg-green-500 hover:bg-green-600 text-white rounded-full p-4 shadow-lg flex items-center justify-center transition-transform transform hover:scale-110">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
                <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/>
            </svg>
        </a>
        <span class="whatsapp-tooltip absolute bottom-1/2 translate-y-1/2 right-full rtl:right-auto rtl:left-full mr-3 rtl:mr-0 rtl:ml-3 px-3 py-2 bg-gray-800 text-white text-sm rounded-md shadow-lg whitespace-nowrap" data-i18n="whatsappTooltip">
            Contact us on WhatsApp
        </span>
    </div>


    <script>
    // --- CONFIGURATION ---
    const whatsappNumber = "972548187710"; // Use international format without +, 00 or symbols. E.g., 15551234567

    // --- CONTENTFUL CMS CONFIGURATION ---
    const contentful = {
        space: 'ljt2bdisdvp9', // <-- PASTE YOUR SPACE ID HERE
        accessToken: 'eHXkF3y40Tz6e3uXTEtVZwxHqq7NJZmw9RfFGzciQYY', // <-- PASTE YOUR ACCESS TOKEN HERE
        contentTypeId: 'flagProduct' 
    };

    // --- DYNAMIC CONTENT & i18n ---
    const translations = {
        'en': {
            navTitle: "TheFlagery", navProducts: "Products", navContact: "Contact", navFAQ: "FAQ", navCTA: "Get a Quote",
            heroTitle: "Your Vision, Your Flag.", heroSubtitle: "High-quality stock flags and fully customizable designs, delivered to your door. Perfect for events, businesses, or personal display.",
            heroCTA1: "Get a Custom Quote", heroCTA2: "See Our Work",
            productsTitle: "Showcase of Our Work", productsSubtitle: "From national flags to custom banners for any occasion, we deliver quality you can see. Have an idea? We can make it.",
            contactTitle: "Have a Custom Flag Idea?", contactSubtitle: "We'd love to hear it. Contact us directly on WhatsApp for a free, no-obligation quote and a digital mockup of your design.",
            contactCTA: "Contact Us on WhatsApp",
            faqTitle: "Frequently Asked Questions",
            footerTitle: "TheFlagery", footerDesc: "Your vision, your flag. Quality and service you can trust.",
            footerLinks: "Quick Links", footerContact: "Contact Info", whatsappContact: "WhatsApp", whatsappTooltip: "Contact us on WhatsApp", footerRights: "All rights reserved."
        },
        'he': {
            navTitle: "הדגלייה'", navProducts: "מוצרים", navContact: "צרו קשר", navFAQ: "שאלות נפוצות", navCTA: "קבלו הצעת מחיר",
            heroTitle: "החזון שלך, הדגל שלך.", heroSubtitle: "דגלי מלאי איכותיים ועיצובים בהתאמה אישית מלאה, במשלוח עד פתח הבית. מושלם לאירועים, עסקים או תצוגה אישית.",
            heroCTA1: "קבלו הצעת מחיר", heroCTA2: "צפו בעבודות שלנו",
            productsTitle: "תיק עבודות", productsSubtitle: "מדגלי לאום ועד באנרים מותאמים אישית לכל אירוע, אנו מספקים איכות שאפשר לראות. יש לכם רעיון? אנחנו יכולים לממש אותו.",
            contactTitle: "יש לכם רעיון לדגל מותאם אישית?", contactSubtitle: "נשמח לשמוע אותו. צרו איתנו קשר ישירות בוואטסאפ לקבלת הצעת מחיר ללא התחייבות ומודל דיגיטלי של העיצוב שלכם.",
            contactCTA: "צרו קשר בוואטסאפ",
            faqTitle: "שאלות נפוצות",
            footerTitle: "הדגלייה'", footerDesc: "החזון שלך, הדגל שלך. איכות ושירות שאתה יכול לסמוך עליהם.",
            footerLinks: "קישורים מהירים", footerContact: "פרטי התקשרות", whatsappContact: "וואטסאפ", whatsappTooltip: "צרו קשר בוואטסאפ", footerRights: "כל הזכויות שמורות."
        }
    };
    
    // --- MAIN SCRIPT ---
    let currentLang = 'en';

    function setLanguage(lang) {
        currentLang = lang;
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                el.innerHTML = translations[lang][key];
            }
        });

        document.documentElement.setAttribute('dir', lang === 'he' ? 'rtl' : 'ltr');
        document.documentElement.setAttribute('lang', lang);

        document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`lang-${lang}`).classList.add('active');
        localStorage.setItem('preferredLanguage', lang);
        
        fetchContentfulData();
    }

    async function fetchContentfulData() {
        const productGrid = document.getElementById('product-grid');
        const loadingSpinner = document.getElementById('loading-spinner');
        const errorMessage = document.getElementById('error-message');
        
        if (!productGrid || !loadingSpinner || !errorMessage) return;

        productGrid.innerHTML = ''; 
        loadingSpinner.style.display = 'flex';
        errorMessage.style.display = 'none';

        if (contentful.space === 'YOUR_SPACE_ID' || contentful.accessToken === 'YOUR_ACCESS_TOKEN') {
            loadingSpinner.style.display = 'none';
            errorMessage.textContent = 'Contentful API keys are not configured. Please update them in the script.';
            errorMessage.style.display = 'block';
            return;
        }

        const query = `
        {
            flagProductCollection(locale: "${currentLang === 'he' ? 'he' : 'en-US'}") {
                items {
                    title
                    description
                    image {
                        url
                        description
                    }
                }
            }
            faqCollection(locale: "${currentLang === 'he' ? 'he' : 'en-US'}", order: sys_firstPublishedAt_ASC) {
                items {
                    question
                    answer
                }
            }
        }`;

        try {
            const response = await fetch(`https://graphql.contentful.com/content/v1/spaces/${contentful.space}/`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${contentful.accessToken}`,
                },
                body: JSON.stringify({ query }),
            });

            if (!response.ok) {
                throw new Error(`Network response was not ok: ${response.statusText}`);
            }

            const { data } = await response.json();
            
            // Populate Products
            if (data.flagProductCollection && data.flagProductCollection.items) {
                productGrid.innerHTML = data.flagProductCollection.items.map(product => `
                    <div class="h-80 bg-white rounded-xl shadow-lg overflow-hidden relative group transform hover:-translate-y-2 transition-transform duration-300">
                        <img src="${product.image.url}" alt="${product.image.description || product.title}" class="w-full h-full object-cover">
                        <div class="absolute inset-0 flex flex-col justify-end p-6 bg-black bg-opacity-30 backdrop-blur-sm group-hover:opacity-0 transition-opacity duration-300">
                            <h3 class="text-xl font-bold mb-2 text-white">${product.title}</h3>
                            <p class="text-gray-200 text-sm">${product.description}</p>
                        </div>
                    </div>
                `).join('');
            }

            // Populate FAQs
            const faqContainer = document.querySelector('#faq .space-y-4');
            if (faqContainer && data.faqCollection && data.faqCollection.items) {
                faqContainer.innerHTML = data.faqCollection.items.map(faq => `
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="font-semibold text-lg">${faq.question}</h3>
                        <p class="mt-2 text-gray-600">${faq.answer}</p>
                    </div>
                `).join('');
            }

        } catch (error) {
            console.error('Failed to fetch Contentful data:', error);
            errorMessage.textContent = 'Failed to load products. Please try again later.';
            errorMessage.style.display = 'block';
        } finally {
            loadingSpinner.style.display = 'none';
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        const yearSpan = document.getElementById('year');
        if (yearSpan) {
            yearSpan.textContent = new Date().getFullYear();
        }

        const whatsappLinks = document.querySelectorAll('a[href*="wa.me"]');
        whatsappLinks.forEach(link => link.href = `https://wa.me/${whatsappNumber}`);

        document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));
        document.getElementById('lang-he').addEventListener('click', () => setLanguage('he'));

        const preferredLanguage = localStorage.getItem('preferredLanguage') || 'en';
        setLanguage(preferredLanguage);
    });
    </script>
</body>
</html>
